let preLoader=$(".preloader"),preloaderBar=$(".preloader #bar"),load=Math.floor(70*Math.random()),body=$("body");async function registerSW(){if("serviceWorker"in navigator)try{await navigator.serviceWorker.register("./sw.js")}catch(e){console.log("SW registration falied")}}body.scrollTop(0),body.css("overflow","hidden"),preloaderBar.css("width",`${load}%`),window.addEventListener("load",()=>{registerSW(),setTimeout(()=>{preloaderBar.css("width","100%"),window.scroll(0,0),setTimeout(()=>{preLoader.fadeOut(),body.removeAttr("style"),navCheck()},1e3)},1e3)});const navCheck=(e,t,o)=>{window.pageYOffset>=t?($(e).removeClass(o),$(e).css("position","fixed"),$(e).css("top","initial")):($(e).addClass(o),$(e).css("position","absolute"),$(e).css("top",t+"px"))},handleQuantity=e=>{let t=document.querySelector("#product-quantity"),o=Number(t.innerHTML),r=t.getAttribute("data-stock");"+"!=e&&"-"!=e||("+"==e&&(t.innerHTML=o>=r?0==r?0:r:o+1),"-"==e&&(t.innerHTML=o<=1?0==r?0:1:o-1))};let getUrl=window.location,baseUrl=getUrl.protocol+"//"+getUrl.host+"/";const clienteLogin=e=>{e.preventDefault();const t=document.getElementById("login").value,o=document.getElementById("password").value;$.ajax({type:"POST",url:baseUrl+"cliente/login",data:{login:t,password:o},success:function(e){res=JSON.parse(e),Swal.fire({icon:res.status,text:res.message,onClose:()=>{"success"==res.status&&location.reload()}})}})},pickUpDate=e=>{document.querySelector("#checkout-btn").setAttribute("data-pickupdate",e)},checkout=e=>{const t=e.getAttribute("data-addressId"),o=e.getAttribute("data-paymenttype"),r=e.getAttribute("data-pickupdate");$.ajax({type:"POST",url:baseUrl+"checkout/order",data:{addressId:t,pType:o,pickUpDate:r},success:function(e){let t=JSON.parse(e);"success"==t.status&&$.ajax({type:"POST",url:baseUrl+"api/notification/update"}),Swal.fire({icon:t.status,text:t.message,onClose:()=>{"success"==t.status&&(location.href=baseUrl+"cliente/dashboard")}})}})},addCart=e=>{let t=document.querySelector("#product-quantity"),o={id:e,quantity:Number(t.innerHTML)};$.ajax({type:"POST",url:baseUrl+"addcart/add",data:{data:o},success:function(e){Swal.fire({icon:"success",text:"Produto adicionado ao carrinho de compras!",allowOutsideClick:!1,onClose:()=>{location.href=baseUrl+"carrinho"}})}})},removeCart=e=>{$.ajax({type:"POST",url:baseUrl+"addcart/remove",data:{id:e},success:function(e){Swal.fire({icon:"success",text:"Produto removido do carrinho de compras!",onClose:()=>{location.reload()}})}})},productSearch=(e,t)=>{13===t.keyCode&&(e=e.replace(/\//g,"-"),e=(e=encodeURI(e)).toLowerCase(),console.log(e),e.length>0&&(location.href=baseUrl+"produtos/pesquisa/"+e))},openSub=(e,t)=>{t.path[0]!=$(e).children("ul").children("li").children("input")[0]&&$(e).children("ul").fadeToggle()},switchForm=(e,t)=>{const o=t.target,r=o.getAttribute("id"),s=$("#form-0"),a=$("#form-1"),i=e.children;if(null!=o.getAttribute("id")){0==r?($(s).addClass("form-active"),$(a).removeClass("form-active")):($(s).removeClass("form-active"),$(a).addClass("form-active"));for(let e=0;e<i.length;e++){const t=i[e],o=t.getAttribute("id");$(t).removeClass("btn-blue"),o==r&&$(t).addClass("btn-blue")}}},clientRegister=(e,t)=>{e.preventDefault();let o={};$(t).serializeArray().map(e=>{o[e.name]=e.value}),$.ajax({type:"POST",url:baseUrl+"cliente/cadastrar",data:{data:o},success:function(e){let t=JSON.parse(e);Swal.fire({title:"Cadastro",icon:t.status,text:t.message,onClose:()=>{"success"==t.status&&(location.href=baseUrl+"cliente/login")}})}})},setImage=e=>{let t=document.getElementById("product-image").children[0],o=e.getAttribute("src");t.setAttribute("src",o)},verifyCep=e=>{if(8==e.length){const t=document.querySelector("#cep"),o=document.querySelector("#cidade"),r=document.querySelector("#bairro"),s=document.querySelector("#rua");let a=e=>`https://viacep.com.br/ws/${e}/json/`;$.ajax({type:"GET",url:a(e),beforeSend:()=>{t.disabled=!0},complete:()=>{t.disabled=!1},success:e=>{e.erro||("RJ"==e.uf?(o.value=e.localidade,r.value=e.bairro,s.value=e.logradouro):(t.value="",o.value="",r.value="",s.value="",Swal.fire({icon:"error",title:"Endereço",text:"O endereço cadastrado precisa ser do Rio de Janeiro."})))}})}},clientAddressRegister=(e,t)=>{e.preventDefault();let o={};$(t).serializeArray().map(e=>{o[e.name]=e.value}),$.ajax({type:"POST",url:baseUrl+"cliente/address/novo",data:{values:o},success:e=>{let t=JSON.parse(e);Swal.fire({title:"Endereço",icon:t.status,text:t.message,onClose:()=>{"success"==t.status&&(location.href=baseUrl+"cliente/dashboard")}})}})},updateNav=()=>{var e=$(".navigation"),t=$(".slide").height();$(e).hasClass("banner")&&($(e).css("position","absolute"),$(e).css("top",t+"px"),navCheck(e,t,"banner"),$(document).scroll(()=>{navCheck(e,t,"banner")}))};$(window).resize(()=>{$(window).width()>=1200&&updateNav()}),$(document).ready(()=>{if($(window).width()>=1200&&$(window).on("load",()=>{updateNav()}),$(window).width()<=960){const e=$("#mobile"),t=$("#mobileNav");$(e).click(()=>{$(t).slideToggle()}),$(".navigation .submenu").click(function(){$(this).toggleClass("active")})}else $(".navigation .submenu").hover(function(){$(this).toggleClass("active")});$(window).resize(()=>{if($(window).width()>960){const e=$("#mobileNav");$(e).removeAttr("style")}}),$(".products-container-sidebar .sidebar-box span").click(function(e){$(this).parent().toggleClass("open");let t=this.parentElement.children[1].scrollHeight;$(this).parent().hasClass("open")?$(this).parent().children(".sidebar-items").css("max-height",t):$(this).parent().children(".sidebar-items").removeAttr("style")}),$(".distributor-slider").length>0&&$(".distributor-slider").slick({infinite:!0,autoplay:!0,autoplaySpeed:3e3,slidesToShow:5,slidesToScroll:2,arrows:!0,prevArrow:document.querySelector(".distributor-controls #left"),nextArrow:document.querySelector(".distributor-controls #right"),responsive:[{breakpoint:1360,settings:{slidesToShow:4,slidesToScroll:2}},{breakpoint:800,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:530,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:425,settings:{slidesToShow:1,slidesToScroll:1}}]}),$(".departments-container").length>0&&$(".departments-container").slick({infinite:!1,slidesToScroll:3,variableWidth:!0,arrows:!1}),$(".container-header-slider").length>0&&$(".container-header-slider").slick({adaptiveHeight:!0,autoplay:!0,autoplaySpeed:3e3,infinite:!0,arrows:!0,prevArrow:document.querySelector(".container .slide .controls").children[0],nextArrow:document.querySelector(".container .slide .controls").children[1]})});const readerSlide=()=>{$("#reader-pictures").slick({infinite:!0,centerMode:!0,arrows:!1,slidesToShow:3,autoplay:!0,autoplaySpeed:3e3,responsive:[{breakpoint:768,settings:{slidesToShow:2}},{breakpoint:550,settings:{slidesToShow:1}}]})};